# üìñ API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìå –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

üîê –ü–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–≤ –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å JWT –∏–ª–∏ Telegram ID).

---

## üìÇ Users

### `GET /users/:id`
–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID (Telegram ID).

#### –û—Ç–≤–µ—Ç:
```json
{
  "id": "123456",
  "username": "john_doe",
  "role": "GUEST",
  "balance": 0
}
```

---

### `POST /users`
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
```json
{
  "id": "123456",
  "username": "john_doe"
}
```

---

### `PATCH /users/:id`
–û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –ü—Ä–∏–º–µ—Ä:
```json
{
  "role": "SUBSCRIBER",
  "balance": 100
}
```

---

### `GET /users/:id/subscriptions`
–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

### `GET /users/:id/transactions`
–ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## üìÇ Plans

### `GET /plans`
–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞—Ä–∏—Ñ–æ–≤.

### `GET /plans/:id`
–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ.

### `POST /plans`
–°–æ–∑–¥–∞—Ç—å —Ç–∞—Ä–∏—Ñ.

#### –ü—Ä–∏–º–µ—Ä:
```json
{
  "name": "1 –º–µ—Å—è—Ü",
  "price": 299,
  "durationDays": 30
}
```

### `PATCH /plans/:id` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ  
### `DELETE /plans/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å —Ç–∞—Ä–∏—Ñ

---

## üìÇ Subscriptions

### `GET /subscriptions/:id`
–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É —Å –¥–µ—Ç–∞–ª—è–º–∏.

### `POST /subscriptions`
–°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É:

```json
{
  "userId": "123456",
  "planId": 1,
  "expiresAt": "2025-08-01T00:00:00.000Z"
}
```

### `PATCH /subscriptions/:id`
–û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É.

---

## üìÇ VPN Keys

### `GET /keys/:id`
–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á.

### `POST /keys`
–°–æ–∑–¥–∞—Ç—å –∫–ª—é—á:

```json
{
  "subscriptionId": 1,
  "serverId": 2,
  "key": "ss://example",
  "serverName": "–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã 1",
  "trafficLimit": 5000,
  "expiresAt": "2025-08-01T00:00:00.000Z"
}
```

### `PATCH /keys/:id`
–û–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á.

---

## üìÇ Servers

### `GET /servers`
–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.

### `GET /servers/:id`
–ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –ø–æ ID.

### `POST /servers`
–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä:

```json
{
  "name": "–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã 1",
  "ip": "185.12.123.5",
  "port": 443,
  "password": "vpn123",
  "country": "Netherlands"
}
```

### `PATCH /servers/:id`
–û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä.

---

## üìÇ Transactions

### `GET /transactions/:id`
–ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.

### `POST /transactions`
–°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é:

```json
{
  "userId": "123456",
  "subcriptionId": 2,
  "amount": 299,
  "type": "PAYMENT",
  "status": "SUCCESS",
  "description": "–û–ø–ª–∞—Ç–∞ —Ç–∞—Ä–∏—Ñ–∞ 1 –º–µ—Å—è—Ü"
}
```

### `GET /transactions/user/:userId`
–í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## üìÇ PromoCodes

### `GET /promos`
–°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤.

### `POST /promos`
–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ:

```json
{
  "code": "FREETRIAL",
  "value": 100,
  "maxUses": 10,
  "expiresAt": "2025-12-31T00:00:00.000Z"
}
```

### `POST /promos/redeem`
–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥:

```json
{
  "userId": "123456",
  "code": "FREETRIAL"
}
```

#### –û—Ç–≤–µ—Ç:
```json
{ "success": true }
```

---